<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>libximc: Working with custom units</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libximc
   &#160;<span id="projectnumber">2.12.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Working with custom units </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In addition to working in basic units(steps, encoder value), the library allows you to work with custom units. For this purpose are used:</p>
<ul>
<li>The structure of the conversion units <a class="el" href="structcalibration__t.html" title="Calibration companion structure.">calibration_t</a></li>
<li>The functions of which have doubles for working with custom units, data structures for these functions</li>
<li>Coordinate correction table for more accurate positioning</li>
</ul>
<h1><a class="anchor" id="userunit_calb1"></a>
The structure of the conversion units calibration_t</h1>
<p>To specify conversion of the basic units in the user and back, <a class="el" href="structcalibration__t.html" title="Calibration companion structure.">calibration_t</a> structure is used. With the help of coefficients A and MicrostepMode, specified in this structure, steps and microsteps which are integers are converted into the user value of the real type and back.</p>
<p>Conversion formulas:</p>
<ul>
<li>The conversion to user units. <pre class="fragment">     user_value = A*(step + mstep/pow(2,MicrostepMode-1))</pre></li>
<li>Conversion from custom units. <pre class="fragment">     step = (int)(user_value/A)
     mstep = (user_value/A - step)*pow(2,MicrostepMode-1)</pre></li>
</ul>
<h1><a class="anchor" id="userunit_calb2"></a>
Alternative functions for working with custom units and data structures for them</h1>
<p>Structures and functions for working with custom units have the _calb postfix. The user using these functions can perform all actions in their own units without worrying about the computations of the controller. The data format of _calb structures is described in detail. For _calb functions particular descriptions are not used. They perform the same actions as the basic functions do. The difference between them and the basic functions is in the position, velocity, and acceleration of the data types defined as user-defined. If clarification for _calb functions is necessary, they are provided as notes in the description of the basic functions.</p>
<h1><a class="anchor" id="userunit_corr"></a>
Coordinate correction table for more accurate positioning</h1>
<p>Some functions for working with custom units support coordinate transformation using a correction table. To load a table from a file, the <a class="el" href="ximc_8h.html#a1df4b020047372a2968bc77ff4f970a9" title="Command of loading a correction table from a text file.">load_correction_table()</a> function is used. Its description contains the functions and their data supporting correction.</p>
<dl class="section note"><dt>Note</dt><dd>For data fields which are corrected in case of loading of the table in the description of the field is written - corrected by the table.</dd></dl>
<p>File format:</p>
<ul>
<li>two columns separated by tabs;</li>
<li>column headers are string;</li>
<li>real type data, point is a separator;</li>
<li>the first column is the coordinate, the second is the deviation caused by a mechanical error;</li>
<li>the deviation between coordinates is calculated linearly;</li>
<li>constant is equal to the deviation at the boundary beyond the range;</li>
<li>maximum length of the table is 100 lines.</li>
</ul>
<p>Sample file: </p>
<pre class="fragment">     X  dX
     0  0
     5.0        0.005
     10.0       -0.01</pre> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 19 2020 16:22:52 for libximc by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.2
</small></address>
</body>
</html>
